#!/usr/bin/env bash

# in deploy container

case "$1" in
    bootstrap)
        shift
        echo bootstrappin\' | lolcat
        declare -a IPS="$@"
        cp -rfp kubespray/inventory/sample inventory
        CONFIG_FILE=inventory/hosts.ini python3 kubespray/contrib/inventory_builder/inventory.py ${IPS[@]}
        #cat inventory/group_vars/all.yml
        #cat inventory/hosts.ini
        ansible-playbook -i inventory/hosts.ini --extra-vars "@config/kube.yml" kubespray/cluster.yml
        ;;
    *)
        curl -s https://gist.githubusercontent.com/hoserdude/9661c9cdc4b59cf5f001/raw/5972d4d838691c1a1f33fb274f97fa0b403d10bd/doge.txt | lolcat
        echo
        echo "Usage: $0 [bootstrap]"
        ;;
esac
